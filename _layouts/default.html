<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  {% include head.html %}
  <body class="layout-{{ page.layout }}{% if page.title %}  {{ page.title | slugify }}{% endif %}">
    <div class="{% if page.layout == 'home' or page.url == '/' %}home-wrapper{% else %}page-wrapper{% endif %}">
      <header class="header">
        {% include header.html %}
      </header>
      {{ content }}
      <footer class="main-footer">{% include footer.html %}</footer>
    </div>
  
    <div class="mobile-overlay" id="mobile-overlay"></div>
    <div id="search-modal">
      <div class="search-overlay"></div>
      <div class="search-container">
        <div class="search-header">
          <i class="ph-duotone ph-magnifying-glass"></i>
          <input type="text" id="search-input" placeholder="Search documentation...">
        </div>
        <div class="search-results"></div>
      </div>
    </div>

    {% if site.service_worker != false %}{% include site-sw.html %}{% endif %}
    {% include site-before-end.html %}
    <script>// assets/js/lazy_ads.js
      document.addEventListener("DOMContentLoaded", () => {
          const lazyAdContainers = document.querySelectorAll('.crma-ad-lazy-load');
      
          if (!lazyAdContainers.length) {
              return;
          }
      
          const adObserver = new IntersectionObserver((entries, observer) => {
              entries.forEach(entry => {
                  if (entry.isIntersecting) {
                      const adContainer = entry.target;
                      
                      // Create the ad script element
                      const adSlot = adContainer.dataset.adSlot;
                      const adFormat = adContainer.dataset.adFormat;
                      const adLayout = adContainer.dataset.adLayout;
      
                      const ins = document.createElement('ins');
                      ins.className = 'adsbygoogle';
                      ins.style.display = 'block';
                      ins.setAttribute('data-ad-client', 'ca-pub-1291242080282540'); // Your Publisher ID
                      ins.setAttribute('data-ad-slot', adSlot);
                      
                      if (adFormat === 'fluid') {
                          ins.setAttribute('data-ad-format', 'fluid');
                          ins.setAttribute('data-ad-layout', adLayout);
                      } else {
                          ins.setAttribute('data-ad-format', adFormat);
                          ins.setAttribute('data-full-width-responsive', 'true');
                      }
                      
                      // Replace placeholder with the actual ad unit
                      const placeholder = adContainer.querySelector('.crma-ad-unit-placeholder');
                      if (placeholder) {
                          placeholder.replaceWith(ins);
                      }
      
                      // Push the ad to Google
                      try {
                          (window.adsbygoogle = window.adsbygoogle || []).push({});
                      } catch (e) {
                          console.error("AdSense error:", e);
                      }
      
                      // Mark as loaded and stop observing this element
                      adContainer.classList.remove('crma-ad-lazy-load');
                      adContainer.classList.add('crma-ad-loaded');
                      observer.unobserve(adContainer);
                  }
              });
          }, { rootMargin: '200px 0px' }); // Load ad when it's 200px away from the viewport
      
          lazyAdContainers.forEach(ad => {
              adObserver.observe(ad);
          });
      });</script>
  </body>

</html>