/* _sass/hero.scss */

// 1. Define SVG-Specific Theme Variables for Light & Dark Mode
// -----------------------------------------------------------------------------
:root {
  --hero-svg-bg: hsl(210, 50%, 98%);
  --hero-svg-glow: hsl(212, 100%, 80%);
  --hero-svg-ambient-data: hsl(214, 20%, 85%);
  --hero-svg-connector: var(--docs-primary);
  --hero-svg-node-active: var(--docs-primary);
  --hero-svg-icon-bg: var(--docs-accent);
  --hero-svg-icon-fg: var(--docs-primary);
}

html.dark {
  --hero-svg-bg: hsl(216, 40%, 14%);
  --hero-svg-glow: hsl(212, 100%, 22%);
  --hero-svg-ambient-data: hsl(216, 20%, 30%);
  --hero-svg-connector: var(--docs-primary);
  --hero-svg-node-active: var(--docs-primary);
  --hero-svg-icon-bg: hsl(216, 35%, 22%);
  --hero-svg-icon-fg: var(--docs-primary);
}

// 2. Base Hero & SVG Wrapper Styling
// -----------------------------------------------------------------------------
.hero-banner--academy {
  background: var(--docs-hero-bg);
  border-bottom: 1px solid var(--docs-border);
  position: relative;
  padding: 4rem 1.5rem;
  overflow: hidden;
  
  .hero-content {
    display: grid; grid-template-columns: 1fr; align-items: center; gap: 2rem;
    max-width: 1200px; margin: 0 auto; position: relative; z-index: 2;
    @media (min-width: 1024px) { grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr); }
  }
  h1 { color: var(--docs-hero-foreground); }
  .hero__subtitle { color: var(--docs-hero-foreground); opacity: 0.8; }
}

.hero-svg-wrapper {
  width: 100%; max-width: 500px; justify-self: center;
  @media (min-width: 1024px) { justify-self: end; }
  
  // For the parallax effect
  #hero-constellation-svg g { transition: transform 0.2s ease-out; }
}

// 3. SVG Element Styling
// -----------------------------------------------------------------------------
#hero-constellation-svg {
  .ambient-data circle { fill: var(--hero-svg-ambient-data); }
  .engine-pulse { fill: var(--hero-svg-connector); opacity: 0.2; }
  .engine-core { fill: var(--hero-svg-connector); }
  .constellation-path { fill: none; stroke: var(--hero-svg-connector); stroke-width: 1.5; stroke-linecap: round; }
  .constellation-node { fill: var(--hero-svg-node-active); }
  .icon-group {
    .ph-duotone-bg { fill: var(--hero-svg-icon-bg); }
    .ph-duotone-fg { fill: var(--hero-svg-icon-fg); }
  }
}

// 4. Animation Definitions
// -----------------------------------------------------------------------------
@keyframes float { 
  0%, 100% { transform: translate(0, 0); }
  25% { transform: translate(5px, -10px); }
  75% { transform: translate(-5px, 10px); }
}
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(3); } }
@keyframes drawLine { to { stroke-dashoffset: 0; } }
@keyframes popIn { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
@keyframes fadeIn { to { opacity: 1; } }

// 5. Animation Sequencing (Total duration ~10s)
// -----------------------------------------------------------------------------
#hero-constellation-svg {
  .ambient-data circle {
    animation: float 10s ease-in-out infinite;
    &:nth-child(2) { animation-duration: 12s; animation-delay: -3s; }
    &:nth-child(3) { animation-duration: 9s; animation-delay: -5s; }
    &:nth-child(4) { animation-duration: 14s; animation-delay: -1s; }
  }

  .engine-pulse {
    transform-origin: center;
    animation: pulse 4s ease-out infinite 1s;
  }

  .constellation-path {
    // Path lengths measured manually or with JS
    &#constellation-chart .constellation-path { stroke-dasharray: 200; stroke-dashoffset: 200; }
    &#constellation-users .constellation-path { stroke-dasharray: 148; stroke-dashoffset: 148; }
    &#constellation-trend .constellation-path { stroke-dasharray: 230; stroke-dashoffset: 230; }
    animation: drawLine 1.5s ease-in-out forwards;
  }

  .constellation-node, .icon-group {
    opacity: 0;
    transform-origin: center;
    animation: popIn 0.5s ease-out forwards;
  }
  
  // Stagger the appearance of each constellation
  #constellation-chart, #icon-chart { animation-delay: 1.5s; }
  #constellation-users, #icon-users { animation-delay: 2.5s; }
  #constellation-trend, #icon-trend { animation-delay: 3.5s; }
}