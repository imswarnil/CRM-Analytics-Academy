{%- assign posts_to_show = paginator.posts | default: site.posts -%}

<section class="post-grid">
  {%- for post in posts_to_show -%}
    {# Renders the post card #}
    <article class="post-card">
      <a href="{{ post.url | relative_url }}" class="post-card__link">
        <div class="post-card__content">
          <h3 class="post-card__title">{{ post.title }}</h3>
          <p class="post-card__excerpt">
            {{ post.excerpt | markdownify | strip_html | truncatewords: 25 }}
          </p>
        </div>
        <footer class="post-card__footer">
          <time datetime="{{ post.date | date_to_xmlschema }}">
            {{ post.date | date: "%B %d, %Y" }}
          </time>
          <span>Read More &rarr;</span>
        </footer>
      </a>
    </article>

    {# --- In-Feed Ad Injection Logic --- #}
    {# After the 3rd post, inject an ad #}
    {%- if forloop.index == 3 -%}
      <div class="post-grid__ad-item">
        <h1>ads</h1>
      </div>
    {%- endif -%}

  {%- endfor -%}
</section>

{%- if paginator -%}
  {% include post-pagination.html %}
{%- endif -%}