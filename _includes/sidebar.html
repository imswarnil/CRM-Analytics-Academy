<div class="sidebar-left-content">
  <nav class="sidebar-nav">
    <ul>
      {%- comment -%}
        Pull posts (skip drafts), group by first category (fallback: "Posts")
        This is compatible with GitHub Pages’ pinned Jekyll/Liquid.
      {%- endcomment -%}
      {% assign posts = site.posts | where_exp: "p", "p.draft != true" %}
      {% assign groups = posts | group_by_exp: "p", "p.categories[0] | default: 'Posts'" %}

      {%- for g in groups -%}
        <li class="nav-category">{{ g.name | replace: '-', ' ' | capitalize }}</li>

        {%- comment -%}
          Order: by optional nav_weight (lower first), then newest
          (If you don’t use nav_weight, it just sorts by date desc.)
        {%- endcomment -%}
        {% assign weighted = g.items | sort: "nav_weight" %}
        {% assign ordered  = weighted | sort: "date" | reverse %}

        {%- for post in ordered -%}
          <li class="nav-link {% if page.url == post.url %}active{% endif %}">
            <a href="{{ post.url | relative_url }}">
              <!-- Hardcoded icon for now -->
              <i class="ph-duotone ph-article"></i>{{ post.title }}
            </a>
          </li>
        {%- endfor -%}
      {%- endfor -%}
    </ul>
  </nav>

  <div class="sponsor-card">
    <div class="ad-label" style="font-size: 0.7rem; color: var(--crma-muted-foreground);">Ad</div>
    <div style="font-weight: 600; margin: 0.5rem 0;">Sponsored Training</div>
    <p style="font-size: 0.875rem; color: var(--crma-muted-foreground); margin: 0;">
      Learn advanced CRM techniques with our new course.
    </p>
  </div>
</div>
