<aside class="sidebar-left" id="sidebar-left">
  <div class="sidebar-left-content">
      <nav class="sidebar-nav">
          
          {%- comment -%}
            STATIC MAIN NAVIGATION
          {%- endcomment -%}
          <ul class="main-nav">
              <li class="nav-link {% if page.url == "/" %}active{% endif %}">
                <a href="{{ "/" | relative_url }}">
                  <i class="ph-duotone ph-house"></i>Home
                </a>
              </li>
              
              {%- comment -%}
                FIXED: Replaced 'startswith' with the 'slice' filter.
                This checks if the first 9 characters of the URL are "/courses/".
              {%- endcomment -%}
              {% assign url_prefix = page.url | slice: 0, 9 %}
              <li class="nav-link {% if url_prefix == "/courses/" %}active{% endif %}">
                <a href="{{ "/courses/" | relative_url }}">
                  <i class="ph-duotone ph-books"></i>Courses
                </a>
              </li>
          </ul>

          <!-- AdSense Unit for Sidebar -->
          <div class="ad ad--sidebar-square">
              <span class="ad__label" aria-label="Advertisement">Advertisement</span>
              <!-- Square (Responsive) -->
              <ins class="adsbygoogle"
                   style="display:block"
                   data-ad-client="ca-pub-1291242080282540"
                   data-ad-slot="7663977887"
                   data-ad-format="auto"
                   data-full-width-responsive="true"></ins>
              <script>
                (window.adsbygoogle = window.adsbygoogle || []).push({});
              </script>
          </div>

          {%- comment -%}
            DYNAMIC POST NAVIGATION
          {%- endcomment -%}
          <ul>
              {% assign posts_by_category = site.posts | group_by: "category" %}
              {% for category in posts_by_category %}
                <li class="nav-category">
                  {{ category.name }}
                </li>

                {% assign sorted_posts = category.items | sort: "date" %}
                {% for post in sorted_posts %}
                  <li class="nav-link {% if page.url == post.url %}active{% endif %}">
                      <a href="{{ post.url | relative_url }}">
                          <i class="ph-duotone {{ post.icon | default: 'ph-article' }}"></i>
                          {{ post.title }}
                      </a>
                  </li>
                {% endfor %}
              {% endfor %}
          </ul>
      </nav>

      {% if site.sidebar_ad_title %}
        <div class="sponsor-card">
            <div class="ad-label">Ad</div>
            <div class="sponsor-title">{{ site.sidebar_ad_title }}</div>
            <p class="sponsor-desc">{{ site.sidebar_ad_desc }}</p>
        </div>
      {% endif %}

  </div>

  {% if site.author %}
    <div class="attribution-card">
        <p>Created by <strong>{{ site.author }}</strong>.</p>
    </div>
  {% endif %}
</aside>