{%- comment -%}
================================================================================
  Smart Adsense Component with Lazy Loading
  - Usage: {% include adsense.html type="[TYPE]" %}
  - This component automatically finds the slot ID from _config.yml
    and prepares the ad for lazy loading via JavaScript.
================================================================================
{%- endcomment -%}

{%- assign ad_type = include.type -%}
{%- assign slot_id = site.adsense.slots[ad_type] -%}

{%- if site.adsense.enabled and ad_type and slot_id -%}
  <div class="crma-ad crma-ad--{{ ad_type }} {{ include.class }}" data-lazy-ad>
    <ins class="adsbygoogle"
         data-ad-client="{{ site.adsense.publisher_id }}"
         data-ad-slot="{{ slot_id }}"
         {%- if ad_type == 'in-article' -%}
           data-ad-layout="in-article"
           data-ad-format="fluid"
         {%- elsif ad_type == 'in-feed' -%}
           data-ad-format="fluid"
           data-ad-layout-key="-6v+f0-19-44+c6"
         {%- endif -%}>
    </ins>
  </div>
{%- endif -%}