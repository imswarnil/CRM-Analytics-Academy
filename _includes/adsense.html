{%- comment -%}
Universal AdSense include (theme-styled + responsive + CLS-safe)

Params:
- type:          square | leaderboard | vertical | article | multiplex | feed
- label:         default "Advertisement"
- class:         extra classes on root wrapper
- align:         left | center | right  (default center)
- ratio:         1x1 | 4x1 | 3x2 | 16x9 | 9x16  (default auto per type)
- ratio_mobile:  override ratio on small screens (optional)
- ratio_tablet:  override ratio on medium screens (optional)
- bordered:      true | false  (default true)
- muted:         true | false  (dim the frame, default false)
- layout_key:    for feed (defaults provided)

NOTE: Load AdSense script ONCE in your layout:
{% if jekyll.environment == "production" %}
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1291242080282540" crossorigin="anonymous"></script>
{% endif %}
{%- endcomment -%}

{%- assign t           = include.type        | downcase | default: 'square' -%}
{%- assign layout_key  = include.layout_key  | default: '-6v+f0-19-44+c6' -%}
{%- assign label       = include.label       | default: 'Advertisement' -%}
{%- assign extra       = include.class       | default: '' -%}
{%- assign align       = include.align       | default: 'center' -%}
{%- assign bordered    = include.bordered    | default: true -%}
{%- assign muted       = include.muted       | default: false -%}

{%- comment -%}
Pick smart default aspect ratios per type (can be overridden)
{%- endcomment -%}
{%- capture default_ratio -%}
{%- if t == 'leaderboard' -%}4x1
{%- elsif t == 'vertical' -%}9x16
{%- elsif t == 'article' -%}3x2
{%- elsif t == 'multiplex' -%}3x2
{%- elsif t == 'feed' -%}3x2
{%- else -%}1x1
{%- endif -%}
{%- endcapture -%}

{%- assign ratio         = include.ratio         | default: default_ratio | downcase -%}
{%- assign ratio_mobile  = include.ratio_mobile  | downcase -%}
{%- assign ratio_tablet  = include.ratio_tablet  | downcase -%}

{%- assign classes = 'ad' -%}
{%- assign classes = classes | append: ' ad--' | append: t -%}
{%- assign classes = classes | append: ' ad--align-' | append: align -%}
{%- if bordered == true or bordered == 'true' -%}{%- assign classes = classes | append: ' ad--bordered' -%}{%- endif -%}
{%- if muted == true or muted == 'true' -%}{%- assign classes = classes | append: ' ad--muted' -%}{%- endif -%}
{%- assign classes = classes | append: ' ad--ratio-' | append: ratio -%}
{%- if ratio_mobile -%}{%- assign classes = classes | append: ' ad--ratio-mobile-' | append: ratio_mobile -%}{%- endif -%}
{%- if ratio_tablet -%}{%- assign classes = classes | append: ' ad--ratio-tablet-' | append: ratio_tablet -%}{%- endif -%}
{%- if extra != '' -%}{%- assign classes = classes | append: ' ' | append: extra -%}{%- endif -%}

<div class="{{ classes }}" role="complementary" aria-label="{{ label }}">
  <span class="ad__label">{{ label }}</span>

  <!-- CLS-safe slot: wrapper reserves aspect-ratio space -->
  <div class="ad__slot">
    {%- if t == 'square' -%}
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-1291242080282540"
           data-ad-slot="7663977887"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>

    {%- elsif t == 'leaderboard' -%}
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-1291242080282540"
           data-ad-slot="8939839370"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>

    {%- elsif t == 'article' -%}
      <ins class="adsbygoogle"
           style="display:block; text-align:center;"
           data-ad-layout="in-article"
           data-ad-format="fluid"
           data-ad-client="ca-pub-1291242080282540"
           data-ad-slot="6501428979"></ins>

    {%- elsif t == 'multiplex' -%}
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-format="autorelaxed"
           data-ad-client="ca-pub-1291242080282540"
           data-ad-slot="6808134701"></ins>

    {%- elsif t == 'feed' -%}
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-format="fluid"
           data-ad-layout-key="{{ layout_key }}"
           data-ad-client="ca-pub-1291242080282540"
           data-ad-slot="9130894804"></ins>

    {%- elsif t == 'vertical' -%}
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-1291242080282540"
           data-ad-slot="3487917390"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
    {%- endif -%}
  </div>

  <script>(window.adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
